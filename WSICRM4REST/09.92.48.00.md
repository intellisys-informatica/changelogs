# WSICRM4REST

# :file_folder: 09.92.48.00

## :memo: O que foi alterado?

<details open>
<summary>Resumo</summary>

- :star: WebHook de integração com Pontal Tech para status de emails

</details>

:star: Novo
:warning: Correção
:arrow_up: Melhoria

<details open>
<summary>Detalhes</summary>

### WebHook Pontal Tech - Status de Email

:star: Criado WebHook para receber callbacks do provedor Pontal Tech

Efetuado criação do WebHook para processar respostas de status de envio de emails do provedor Pontal Tech.

**Implementação:**
- Criada a página pgRespostaPontalTech_Email para receber os callbacks
- Ajustes na classe StatusEnvioMensagem para conter os novos status agrupados de integração

**Novos status de integração:**
- **CNS_INTEGRACAO_AGENDADO_PROVEDOR** = 121 - Mensagem agendada no provedor
- **CNS_INTEGRACAO_ENTREGUE_AO_DESTINATARIO** = 122 - Mensagem entregue ao destinatário
- **CNS_INTEGRACAO_LIDA_POR_DESTINATARIO** = 123 - Mensagem lida pelo destinatário
- **CNS_INTEGRACAO_NAO_ENTREGUE_AO_DESTINATARIO** = 124 - Falha na entrega ao destinatário
- **CNS_INTEGRACAO_DESTINATARIO_INVALIDO** = 125 - Destinatário inválido

**Número da Tarefa:** 16157

</details>

## :cd: Banco de dados

Não houve alteração no banco de dados.

<details open>
<summary>Resumo</summary>
</details>

<details open>
<summary>Detalhes</summary>
</details>

<details open>
<summary>Scripts</summary>
</details>

## :wrench: Configurações necessárias

**OBS1:** Necessário gerar versão do WSICRM4REST.

**OBS2:** Configurar o webhook no painel do Pontal Tech:
- Configurar os eventos que devem acionar o webhook (entrega, leitura, falha, etc.)

**OBS3:** Testar o recebimento dos callbacks do Pontal Tech:
- Enviar emails de teste através da integração
- Verificar se os status estão sendo atualizados corretamente na base de dados
- Validar todos os possíveis status de retorno (121, 122, 123, 124, 125)

**OBS4:** Certificar-se de que o iCRM4 está configurado com as credenciais corretas do Pontal Tech (ID Cliente e ID Conta) conforme documentado no changelog do iCRM4 versão 09.92.48.00.
