# iCRM4Imprime

# :file_folder: 09.92.48.00

## :memo: O que foi alterado?

<details open>
<summary>Resumo</summary>

- :star: Layout de impressão de cartão Gift para cliente AMCASH
- :star: Personalização de nome do cartão - Campo configurável por bandeira
- :arrow_up: Ajustes em relatórios de impressão para suportar nome personalizado

</details>

:star: Novo
:warning: Correção
:arrow_up: Melhoria

---

<details open>

<summary>Detalhes</summary>

:star: **Layout de impressão de cartão Gift para cliente AMCASH**

Foi efetuado a criação do RPT para o módulo Gift para o cliente AMCASH o nome da configuração na tela PAGE_PainelImprimirCartao: DTCARDSD360-AMCASH-GIFT

:star: **Personalização de nome do cartão - Campo configurável por bandeira**

Efetuado ajustes para permitir a personalização do nome que aparece no cartão Gift através de configuração na bandeira.

**Banco de Dados:** Inserção da coluna nova BndNomeCartaoPersonalizado no modelo ModeloBandeira

**iCRM4:** Inserção do campo "Nome Cartão Personalizado" na tela PAGE_Painel_Bandeira no plane form e no plane view quando a bandeira é do tipo 6 - GIFT

**WSICRM4Rest:** Inserção da coluna nova BndNomeCartaoPersonalizado na devolução do Cartão Unitário na pg pgImprimeCartaoUnitario_v1

**iCRM4Imprime:** Ajuste nas classes GerenciadorService e ModeloCartao para receber a nova informação BndNomeCartaoPersonalizado
Ajuste nos relatórios: RPT_ImpressaoAMCASHCartaoGift, RPT_ImpressaoPRCTGift_v1
Quando a tag BndNomeCartaoPersonalizado estiver preenchida, será trocado o nome "GIFT CARD" pelo nome escolhido na Bandeira

</details>

---

## :cd: Banco de dados

Houve alterações no banco de dados.

<details open>
<summary>Resumo</summary>

- Adicionada coluna para armazenar nome personalizado do cartão na tabela TB_BANDEIRA

</details>

<details open>
<summary>Detalhes</summary>

### Tabela TB_BANDEIRA

Adicionada coluna para permitir a personalização do nome exibido no cartão Gift:
- **BNDNOMECARTAOPERSONALIZADO** (VARCHAR2(100)) - Nome Personalizado para ser impresso no cartão

</details>

---

<details open>
<summary>Scripts</summary>

```sql
ALTER TABLE TB_BANDEIRA ADD BNDNOMECARTAOPERSONALIZADO VARCHAR2(100);

COMMENT ON COLUMN TB_BANDEIRA.BNDNOMECARTAOPERSONALIZADO IS 'Nome Personalizado para ser impresso no cartão';
```

</details>

---

## :wrench: Configurações necessárias

Necessário atualizar webservice WSICRM4Rest (para integração da API).
Para configurar o layout do cartão Gift AMCASH:
- Acessar iCRM4: Configurações → Serviços → Impressão
- Campo: "Layout do Cartão Gift RPT"
- Valor: DTCARDSD360-AMCASH-GIFT

Para personalizar o nome do cartão Gift:
- Acessar iCRM4: Cadastros → Bandeiras
- Selecionar uma bandeira do tipo "6 - GIFT"
- Preencher o campo "Nome Cartão Personalizado" com o texto desejado
- O nome padrão "GIFT CARD" será substituído pelo nome configurado na impressão
