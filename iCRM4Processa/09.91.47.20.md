# ICRM4Processa

# :file_folder: 09.91.47.20

*Atualizado em: 03/11/2025*

## :memo: O que foi alterado?

<details open>
<summary>Resumo</summary>

- :warning: Correção na geração de boleto parcela cobrança - RPT_RelBoletoCobranca
- :warning: Correção no filtro Local de Recebimento - RPT_RelatorioDeVendasECobrancaParcelaConferenciaOriginal

</details>

:star: Novo
:warning: Correção
:arrow_up: Melhoria

<details open>
<summary>Detalhes</summary>

:warning: Correção na geração de boleto parcela cobrança - RPT_RelBoletoCobranca

Ao enviar a cobrança para o cliente, o relatório `RPT_RelBoletoCobranca` estava duplicando as parcelas, gerando 2 folhas da mesma parcela. O erro estava no relatório que não estava utilizando o filtro de `max(cobnegcodigo)` na cláusula WHERE. Isso causava a duplicação na captura das cobranças parcelas. Foi corrigido para utilizar o filtro correto e evitar duplicações.

:warning: Correção no filtro Local de Recebimento - RPT_RelatorioDeVendasECobrancaParcelaConferenciaOriginal

O relatório `RPT_RelatorioDeVendasECobrancaParcelaConferenciaOriginal` não estava filtrando corretamente o campo `Local de Recebimento` quando o filtro era configurado para movimentos do tipo `2 - PAGAMENTO`. O sistema sempre estava usando na sentença o valor `0` (Loja).

A correção implementada ajusta o tratamento correto dos valores:
- **-1**: TODOS os locais de recebimento
- **0**: LOJA
- **Acima de 0**: Locais de Recebimento específicos (ex: 1 - BANCO ITAÚ)

Foi efetuado ajuste no relatório para que o campo Local de Recebimento seja tratado de forma correta quando recebido do ICRM4 Site.

</details>

## :cd: Banco de dados

Não houve alteração no banco de dados.

## :wrench: Configurações necessárias

Não há configurações necessárias para esta versão.
